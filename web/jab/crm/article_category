?template("crm_head")?<ul class="tab left"><li>基本信息</a></li><li>分类标签</li><li><a href="?site('article/home/detail')?/?artice.articleId?" target="_blank">预览</a></li></ul><form action="?site('crm/article/category')?" method="post" id="act-jump"><input type="hidden" name="articleId" value="?articleId?" /><table><tr style="background:#F6F6F6;"><td style="text-align:left"><div style="width:325px;float:left;height:540px;overflow:auto"><strong>分类</strong><ul id="cate8912" style="overflow:auto;width:300px;margin-left:20px;">?api('crm').categoryOption("0",0)?</ul></div><div style="width:325px;margin-left:45px;float:left;height:540px;overflow:auto"></ul></div></td></tr><tr style="background:#F6F6F6"><td><input type="submit" class="bt" value="提交" /><input type="reset" class="bt" value="重置" /></td></tr></table></form></div><script type="text/javascript"> function setTag(obj) { id = $(obj).val(); var tags = 'no'; if ($(obj).attr('checked')) { $('.cls' + id).show(); txt = $(obj).next().text(); if ($('div').data(id)) { tags = $('div').data(id); } else { $.ajax({ url: '?site("core/category/tag_option")?/' + id, type: 'POST', async: false, success: function (msg) { if (msg == '') tags = 'no'; else tags = msg; $("div").data(id, tags); }, error: function (obj) { alert(obj.responseText); } }); } if (tags != 'no') $('#tag78219').append('<li id="cate' + id + '"><strong>' + txt + '</strong> ' + tags + '</li>'); } else { del_cat($(obj), 0); } } function del_cat(obj) { tid = obj.val(); $('#cate' + tid).remove(); $('.cls' + tid + ' input[type="checkbox"]').each(function () { var fid = $(this).val(); var lte = $('.cls' + fid); if (lte != null && lte.length > 0) { del_cat($(this)); } $(this).attr('checked', false); $(this).parent('').hide(); $('#cate' + fid).remove(); }); } categorys = '?detail.categorys?'; $('#cate8912 input').each(function () { if (categorys.indexOf($(this).val()) >= 0) { $(this).attr('checked', 'checked'); $('.cls' + $(this).val()).show(); } }); tags = '?detail.Tags?'; $('#tag78219 input').each(function () { if (tags.indexOf($(this).val()) >= 0) { $(this).attr('checked', 'checked'); } });</script>?template("base_foot")?